<section class="about" id="about">
  <div class="about__container">
    <header class="about__intro">
      <h2>{{ sectionTitle }}</h2>
      <p>{{ subtitle }}</p>
    </header>

    <div class="about__grid">
      <div class="profile-card">
        <div class="profile-card__image">
          <img
            [src]="portraitSrc"
            [alt]="sectionTitle"
            (error)="handleImageError($event)"
          />
        </div>

        <div class="profile-card__bio">
          <p *ngFor="let paragraph of descriptionParagraphs">
            {{ paragraph }}
          </p>
        </div>

        <div class="profile-card__skills" *ngIf="skillsToRender.length">
          <p class="section-eyebrow">Core Skills</p>
          <div class="chip-group">
            <span class="chip" *ngFor="let skill of skillsToRender">
              {{ skill }}
            </span>
          </div>
        </div>
      </div>

      <div class="journey-card">
        <h3>My Journey</h3>
        <div class="timeline">
          <article class="timeline-item" *ngFor="let item of timelineToRender; let index = index">
            <div class="timeline-item__date">
              <span>{{ formatDateRange(item) }}</span>
            </div>
            <div class="timeline-item__content">
              <h4>{{ item.position }}</h4>
              <p class="company">{{ item.company }}</p>
              <p class="description">{{ item.description }}</p>
              <p class="skills" *ngIf="item.skills?.length">
                Skills: {{ item.skills?.join(', ') }}
              </p>
            </div>
          </article>
        </div>
      </div>
    </div>

    <div class="stats-grid">
      <article class="stats-card" *ngFor="let stat of statsToRender; let index = index">
        <span class="stats-card__icon" [ngSwitch]="statIconSet[index % statIconSet.length]">
          <svg
            *ngSwitchCase="'code'"
            viewBox="0 0 24 24"
            role="img"
            aria-hidden="true"
          >
            <polyline points="16 18 22 12 16 6" />
            <polyline points="8 6 2 12 8 18" />
          </svg>
          <svg
            *ngSwitchCase="'coffee'"
            viewBox="0 0 24 24"
            role="img"
            aria-hidden="true"
          >
            <path d="M3 8h14v5a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z" />
            <path d="M17 8h1a3 3 0 1 1 0 6h-1" />
            <path d="M6 3v2" />
            <path d="M10 3v2" />
            <path d="M14 3v2" />
            <path d="M2 21h16" />
          </svg>
          <svg
            *ngSwitchCase="'award'"
            viewBox="0 0 24 24"
            role="img"
            aria-hidden="true"
          >
            <circle cx="12" cy="8" r="5" />
            <path d="M8.5 14 7 22l5-2 5 2-1.5-8" />
          </svg>
          <svg
            *ngSwitchDefault
            viewBox="0 0 24 24"
            role="img"
            aria-hidden="true"
          >
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
            <path d="M16 2v4" />
            <path d="M8 2v4" />
            <path d="M3 10h18" />
          </svg>
        </span>
        <p class="stats-card__value">{{ stat.value }}</p>
        <p class="stats-card__label">{{ stat.label }}</p>
      </article>
    </div>

    <p class="about__loading" *ngIf="isLoading">
      Loading your latest story...
    </p>
  </div>
</section>
